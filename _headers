# Netlify Headers Configuration for LuvLang Mastering Engine
# Enables WebAssembly, SharedArrayBuffer, and Audio Worklets

# Apply to all pages - Required for SharedArrayBuffer and Audio Worklets
/*
  Cross-Origin-Opener-Policy: same-origin
  Cross-Origin-Embedder-Policy: require-corp
  Cross-Origin-Resource-Policy: cross-origin

# WebAssembly files - Critical MIME type and caching
# ⚠️  DO NOT manually set Content-Encoding: br
# Let Netlify handle compression automatically to avoid mismatch errors
/wasm/build/*.wasm
  Content-Type: application/wasm
  Cache-Control: public, max-age=31536000, immutable

# Pre-compressed Brotli WASM files (if using manual compression)
/wasm/build/*.wasm.br
  Content-Type: application/wasm
  Content-Encoding: br
  Cache-Control: public, max-age=31536000, immutable

# JavaScript modules
/*.js
  Content-Type: application/javascript; charset=utf-8
  Cache-Control: public, max-age=31536000, immutable

# CSS files
/*.css
  Content-Type: text/css; charset=utf-8
  Cache-Control: public, max-age=31536000, immutable

# HTML - No cache (always get latest)
/*.html
  Cache-Control: no-cache, no-store, must-revalidate
  Pragma: no-cache
  Expires: 0

# Audio files - Allow streaming
/*.wav
  Content-Type: audio/wav
  Cache-Control: no-cache

/*.mp3
  Content-Type: audio/mpeg
  Cache-Control: no-cache

# Fonts
/*.woff2
  Content-Type: font/woff2
  Cache-Control: public, max-age=31536000, immutable

/*.woff
  Content-Type: font/woff
  Cache-Control: public, max-age=31536000, immutable
